const vdf   = require('../../../../node-vdf');
const camelCase = require('camelcase');

class VDF
{
    toVDF ()
    {
        let output = {};
        let base   = '';
        if (this.constructor.name === 'App') {
            base = 'appbuild';
        } else if (this.constructor.name === 'Depot') {
            base = 'DepotBuildConfig';
        }

        output[base] = {};
        const properties = Object.getOwnPropertyNames(this);

        properties.forEach(prop => {
            let getter = prop.substr(1);
            let key = camelCase(getter);
            if(typeof this[getter] !== 'undefined') {
                output[base][key] = this[getter];
            }
        });


        return vdf.dump(output).trim();
    }
}

module.exports = VDF;